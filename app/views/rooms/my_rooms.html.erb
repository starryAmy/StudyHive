<div class="d-flex flex-column justify-content-evenly align-items-center index-room-bg">

  <div class="container mt-4">
    <div><%= render "shared/create_hive_button" %></div>
  </div>

  <div class="container mt-4">
    <h1>ğŸ You Are the Owner</h1>
    <div style="height: <%= (@rooms_owned.count / 2.8 * 312) + 104 %>px">
      <div class="row" data-controller="hexagon">
        <% @rooms_owned.each do |room| %>
          <% if (room.public == true && room.locked == false) || room.user == current_user %>
            <% @is_entering_allowed = true %>
          <% elsif room.public == false && room.locked == false && Spot.find_by(room: room, user: current_user, status: :pending) %>
            <% @is_entering_allowed = false %>
            <p>Join request has been sent.</p>
          <% elsif room.public == false && room.locked == false && Spot.find_by(room: room, user: current_user, status: :accepted) %>
            <% @is_entering_allowed = true %>
          <% elsif room.public == false && room.locked == false %>
            <% @is_entering_allowed = false %>
          <% elsif room.locked == true %>
            <% @is_entering_allowed = false %>
            <p>Sorry this room is locked.</p>
          <%end%>
          <% if @is_entering_allowed %>
            <%= link_to room_path(room) do %>
              <%=render "shared/roomcard", room: room%>
            <% end %>
          <% else %>
            <%=render "shared/roomcard", room: room%>
          <% end %>
        <%end%>
      </div>
    </div>
    <h1 style="margin-top: 80px;">ğŸ Your Are the Member</h1>
    <div style="height: <%= (@rooms_member.count / 1.5 * 312) + 104 %>px">
      <div class="row mb-3" data-controller="hexagon">
        <% @rooms_member.each do |room| %>
          <% if @is_entering_allowed %>
            <%= link_to room_path(room) do %>
              <%=render "shared/roomcard", room: room%>
            <% end %>
          <% else %>
            <%=render "shared/roomcard", room: room%>
          <% end %>
        <%end%>
      </div>
    </div>
  </div>
</div>
